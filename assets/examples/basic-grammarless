JSpec.describe('ShoppingCart', function(){
  before_each(function(){
    cart = new ShoppingCart
  })
  
  describe('addProduct', function(){
    it('should add a product', function(){
      cart.addProduct('cookie')
      cart.addProduct('icecream')
      expect(cart).to(have, 2, 'products')
    })
  })

  describe('addProducts', function(){
    it('should add several products', function(){
      expect(cart.).to(receive, 'addProduct', 'twice').with_args(an_instance_of(String)))
      cart.addProducts('cookie', 'icecream')
    })
  })

  describe('checkout', function(){
    it('throw an error when checking out with no products', function(){
      expect(function{ cart.clear().checkout() }).to(throw_error, CheckoutError, 'No products')
    })
  })
})